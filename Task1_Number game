package Java;
import java.util.*;

public class Numbergame {

    /**
     * CODSOFT Task 1: Number Game (Scoreboard Edition)
     * Features: Difficulty levels with fixed ranges, hints every step, and live scoreboard.
     */

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        Random random = new Random();

        System.out.println("=======================================");
        System.out.println("      🎮 Welcome to Number Game! 🎮     ");
        System.out.println("=======================================");

        // Scoreboard: player name -> score
        Map<String, Integer> scoreboard = new HashMap<>();

        boolean playAgain = true;

        while (playAgain) {
            System.out.print("\nEnter your name: ");
            String playerName = scanner.next();

            int round = 1;
            int totalScore = scoreboard.getOrDefault(playerName, 0);

            boolean continueRounds = true;
            while (continueRounds) {
                System.out.println("\n--- Round " + round + " ---");

                // Difficulty
                System.out.println("Choose difficulty: ");
                System.out.println("1. Easy (1–20, 10 attempts)");
                System.out.println("2. Medium (1–50, 7 attempts)");
                System.out.println("3. Hard (1–100, 5 attempts)");
                System.out.print("Enter your choice (1/2/3): ");
                int difficulty = scanner.nextInt();

                int numberToGuess = 0, attemptsLeft = 0;
                switch (difficulty) {
                    case 1:
                        numberToGuess = random.nextInt(20) + 1;
                        attemptsLeft = 10;
                        break;
                    case 2:
                        numberToGuess = random.nextInt(50) + 1;
                        attemptsLeft = 7;
                        break;
                    case 3:
                        numberToGuess = random.nextInt(100) + 1;
                        attemptsLeft = 5;
                        break;
                    default:
                        System.out.println("Invalid choice! Defaulting to Medium.");
                        numberToGuess = random.nextInt(50) + 1;
                        attemptsLeft = 7;
                }

                boolean guessedCorrectly = false;
                System.out.println("\nI have selected a number. Can you guess it?");
                System.out.println("You have " + attemptsLeft + " attempts!");

                while (attemptsLeft > 0) {
                    System.out.print("\nEnter your guess: ");
                    int guess = scanner.nextInt();

                    if (guess == numberToGuess) {
                        System.out.println("✅ Congratulations! You guessed it right.");
                        guessedCorrectly = true;

                        int points = attemptsLeft * 10;
                        totalScore += points;
                        System.out.println("🎉 You earned " + points + " points this round!");
                        break;
                    } else {
                        if (guess > numberToGuess) {
                            System.out.println("⚠️ Too HIGH!");
                        } else {
                            System.out.println("⚠️ Too LOW!");
                        }

                        // Always give hints
                        if (numberToGuess % 2 == 0) {
                            System.out.println("💡 Hint: The number is EVEN.");
                        } else {
                            System.out.println("💡 Hint: The number is ODD.");
                        }

                        if (numberToGuess % 5 == 0) {
                            System.out.println("💡 Hint: The number is divisible by 5.");
                        } else if (numberToGuess % 3 == 0) {
                            System.out.println("💡 Hint: The number is divisible by 3.");
                        } else if (numberToGuess % 7 == 0) {
                            System.out.println("💡 Hint: The number is divisible by 7.");
                        }
                    }

                    attemptsLeft--;
                    System.out.println("Attempts remaining: " + attemptsLeft);
                }

                if (!guessedCorrectly) {
                    System.out.println("❌ Out of attempts!");
                    System.out.println("The correct number was: " + numberToGuess);
                }

                // Update player score
                scoreboard.put(playerName, totalScore);

                // Show live scoreboard
                showScoreboard(scoreboard);

                System.out.print("\nDo you want to play another round? (yes/no): ");
                String choice = scanner.next();
                if (choice.equalsIgnoreCase("no")) {
                    continueRounds = false;
                } else {
                    round++;
                }
            }

            System.out.print("\nDo you want another player to join? (yes/no): ");
            String anotherPlayer = scanner.next();
            if (anotherPlayer.equalsIgnoreCase("no")) {
                playAgain = false;
            }
        }

        // Final Scoreboard
        System.out.println("\n=======================================");
        System.out.println("🏆 FINAL SCOREBOARD 🏆");
        showScoreboard(scoreboard);
        System.out.println("=======================================");
        System.out.println("🎯 Game Over! Thanks for playing!");
        System.out.println("=======================================");

        scanner.close();
    }

    // Helper method to display scoreboard sorted by score
    private static void showScoreboard(Map<String, Integer> scoreboard) {
        System.out.println("\n📊 SCOREBOARD 📊");
        scoreboard.entrySet().stream()
                .sorted((a, b) -> b.getValue().compareTo(a.getValue()))
                .forEach(entry -> System.out.println(entry.getKey() + " : " + entry.getValue() + " points"));
    }
}
